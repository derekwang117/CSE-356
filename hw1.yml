---
- name: Install nginx
  hosts: hw1
  become: true

  tasks:
  - name: Install nginx
    yum:
      name: nginx
      state: present

  - name: Start NGiNX
    service:
      name: nginx
      state: started

  - name: Create hw1 directory
    command: mkdir hw1

  - name: Download hw0 from git
    git:
      repo: 'https://github.com/derekwang117/CSE-356.git'
      dest: hw1

  - name: Insert Index Page
    copy:
      src: hw1/hw0.html
      dest: /var/www/html

  - name: Insert Image Page
    copy:
      src: hw1/janna_top.PNG
      dest: /var/www/html

  - name: Edit nginx default
    replace:
      path: /etc/nginx/sites-available/default
      regexp: 'index.nginx-debian.html'
      replace: 'hw0.html'


  - name: Restart NGiNX
    service:
      name: nginx
      state: restarted